<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Gouvernement – Demo Supabase</title>
  </head>
  <body>
    <h1>Personnes</h1>
    <ul id="list">Chargement…</ul>

    <script>
      const SUPABASE_URL = "https://sfflclyfwxvbuvrabnwf.supabase.co"; // ← entre guillemets !
      const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNmZmxjbHlmd3h2YnV2cmFibnVyYWJud2YiLCJyb2xlIjoiYW5vbiIsImlhdCI6MTcyODQ0ODI4MywiZXhwIjoxNzYwMDI0MjgzfQ.fEEMqwsKQF0cxBzXbK5hDWQBB2thWzuhAejyT1tTWvY"; // ← ta vraie clé publique

      async function loadPersons() {
        const res = await fetch(`${SUPABASE_URL}/rest/v1/persons?select=*`, {
          headers: {
            apikey: SUPABASE_ANON_KEY,
            Authorization: `Bearer ${SUPABASE_ANON_KEY}`,
          },
        });
        const data = await res.json();
        const ul = document.getElementById("list");
        ul.innerHTML = "";
        data.forEach((p) => {
          const li = document.createElement("li");
          li.textContent = p.full_name;
          ul.appendChild(li);
        });
      }

      loadPersons();
    </script>
  </body>
</html>
